# [Variable] 設計仕様書

## 1. 概要

計算グラフの最小単位となる変数を管理するクラス。実データ、勾配、およびその変数を生成した関数（creator）を保持し、逆伝播の起点となる。

## 2. クラス/構造体 定義

| 変数名 | 型 (Python/C) | 説明 | 備考 |
| --- | --- | --- | --- |
| `data` | `ndarray / double*` | インスタンスが保持する実データ。ndarray以外はTypeErrorとする。 |  |
| `grad` | `ndarray / double*` | データの勾配（微分値）。 |  |
| `creator` | `Function / void*` | この変数を作成した関数インスタンスへの参照。 |  |

## 3. メソッド/関数 インターフェース

### `set_creator(self, func)`

* **役割**: 変数を作成した関数を記憶する。

### `backward(self)`

* **役割**: `creator` をリスト形式で取り出し、逆伝播処理の自動化を行う。

## 4. 処理フロー

1. **初期化**: 引数の `ndarray` からデータを抽出し、`data`, `grad`, `creator` を初期化する。
2. **逆伝播開始**: `backward` が呼ばれた際、自身の `creator` を取得する。
3. **自動化ループ**:
* 関数に格納された勾配を `gys`（リスト形式）として取得。
* 関数のバックワードを呼び出し、結果を `gxs` に格納。
* 各入力変数に対して再帰的あるいはループ的に処理を継続する。