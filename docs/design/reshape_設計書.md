# [reshape機能] 設計仕様書

## 1. 概要
- Variabeleインスタンスの形状を配列からタプルに整形する関数
- 逆伝播時において渡されたタプルを配列に整形を行う補助関数
## 2. クラス 定義

| 変数名 | 型  | 説明 | 備考 |
| --- | --- | --- | --- |
| `shape` | `tuple` | 変更後の形状 | 渡す形状は整形元の配列(テンソル)の要素数と一致している必要がある |
| `y` | `tuple` | 整形し出力されるタプル | `forward`の戻り値として使用する |

## 3. Reshape(Function)

### `__init__(self, shape)`

* **役割**: 引数からタプルを受取り、インスタンス変数に格納
* **処理フロー**: `self.shape = shape`

### `forward(self, x)`

* **役割**: 引数で渡されたVariableインスタンスの形状をタプルに変更
* **処理フロー**: `self.x_shape = x.shape`でxの形状を取り出し、`y = x.reshape(self.shape)`で指定された形状に整形する

### `backward(self, gy)`

* **役割**: `reshaepe`関数を用いて、逆伝播における勾配を順伝播で渡された配列(テンソル)と同じ形状に整形し返す
* **処理フロー**:`reshape(gy, self.x_shape)` を戻り値として返す

## 4. reshape
* **役割**: `Reshape`クラスの逆伝播時において、勾配を順伝播で渡された配列(テンソル)と同じ形状に整形する補助関数
* **プロトタイプ**: `reshape(x, shape)`
* **処理フロー1**: `if x.shape == shepe`であることを確認する
    * **処理フロー2**: 形状が一致していた場合`as_variable(x)`でVariableインスタンスに変更し返す
* **処理フロー3**: 形状が一致しない場合、`Reshape(shape)(x)`で引数を`Reshape`クラスに渡しタプルとして返す

