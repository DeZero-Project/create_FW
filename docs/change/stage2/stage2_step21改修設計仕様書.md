# [Variableインスタンスの計算方法] 改修設計仕様書

## 1. 改修の目的・背景
- **背景**: [Variableインスタンスと異なる型で演算可能にすることで利便性の向上が狙えると考えたため]
- **目的**: [Variableインスタンスとそれ以外の型を用いた加算・乗算を実行可能にする。]

## 2. 変更内容一覧

| クラス名 | 関数/メソッド名 | 変更の概要 |
| :--- | :--- | :--- |
| `Function` | `__call__` | 引数から受け取った値をas_variableに渡すリスト内表記を持つ変数を定義 |
| `Variable` | `__rmul__ `/ `__radd__` | 演算の際にvariableインスタンスが右項にあった場合に呼び出されるメソッドを追加 |
| `Variable` | `__array_prority__` | インスタンスの優先度を200に設定し最初にVariable演算が呼び出されるメソッドを追加 |
| :--- | `add` | 引数x1をas_arrayに渡す処理を追加 |
| :--- | `mul` | 引数x1をas_arrayに渡す処理を追加 |

## 3. 詳細設計（Before & After）

### 3.1 [Variable]
#### 変更前 (Before)
- [Variableインスタンスを演算する際は必ずVariableインスタンス同士でしか演算が行えなかった]

#### 変更後 (After)
- **データ構造**: `inputs` 変数を作成し受け取った値をリスト内表記を用いて全てVariableインスタンス化する
- **インスタンスの優先順位**: `__array_prority__` を使用し、常にVariableメソッドが先に呼び出され演算を行う

## 4. 影響範囲と整合性

- **関連1**: `Function`クラスに`ouputs = [as_variable(x)for x in inputs]` を追加し引数(inputs)を全てVariableインスタンスに変更
- **関連2**: `__array_prority__` を定義することで演算開始時に`Variable` が最優先で呼び出されるよう変更
- **関連3**: `Variable` 関数が演算時点の右項だった場合も演算可能にするための `__rmul__`と`__radd__` を定義

## 5. テスト・検証項目
- [x] Variableインスタンスとスカラの演算が行えるか確認
- [x] Variableインスタンスを右項に設定した場合に演算が行えるか確認